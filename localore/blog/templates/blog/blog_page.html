{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-connection{% endblock %}

{% block content %}

<div id="title" class="title title-about">
	<div>
		<h1>{{ page.title }}</h1>
		<h3>{{ page.subtitle }}</h3>
		{% with prev=page.get_prev_siblings.live.first next=page.get_next_siblings.live.first %}
			{% if prev %}
				<a href="{% pageurl prev %}" title="{{ prev }}" class="title-nav title-prev"></a>
			{% endif %}
			{% if next %}
				<a href="{% pageurl next %}" title="{{ next }}" class="title-nav title-next"></a>
			{% endif %}
		{% endwith %}
	</div>
</div>

<div class="hero-section">
	{# TODO this needs to be implemented on the CMS - note the change from page.main_image to page.video_poster_image.file.url #}
	{# functionality should be the same as on the homepage #}
	{% if page.video_mp4 and page.video_webm and page.video_ogv and page.video_poster_image %}
		<div id="preview" class="full-bg-video"
				 data-vide-bg="mp4: {{ page.video_mp4.file.url }}, webm: {{ page.video_webm.file.url }}, ogv: {{ page.video_ogv.file.url }}, poster: {{ page.video_poster_image.file.url }}"
				 data-vide-options="posterType: jpg">
		</div>
	{% else %}
		<div id="preview" class="full-bg-image" style="background-image:url({{ page.video_poster_image.file.url }})"></div>
	{% endif %}
	<div id="main-video" class="full-bg-video">
		<div id="youtube-embed"></div>
	</div>
</div>

{# TODO this section needs to be dynamic and optional #}
<div class="text-description">
	<div class="container">
		<p>Aliqua veniam pariatur elit sint dolor ad elit culpa esse adipisicing ex mollit velit amet occaecat non dolore. Id proident consectetur sunt aliquip sit ea eiusmod irure adipisicing aliquip. Exercitation cupidatat eu excepteur occaecat dolore esse duis nulla ullamco quis. Consequat sint cupidatat laborum eu excepteur quis amet. Ut excepteur ipsum incididunt mollit exercitation veniam eu et anim.</p>
	</div>
</div>

<div class="container">

	{{ page.body }}

	{% if page.associated_productions.all %}
	<div class="connection-prods">
		<h6>Productions Mentioned</h6>
		{% for item in page.associated_productions.all %}
			<a href="{{ item.production_page.url }}" class="link-large">{{ item.production_page }}</a>
		{% if not forloop.last %}, {% endif %}
		{% endfor %}
	</div>
	{% endif %}
</div>

{% if page.related_posts.all %}
<div class="text-description connection-more">
	<div class="container">
		<h6>More connections</h6>
		{% for item in page.related_posts.all %}
			<a href="{{ item.related_blog_page.url }}" class="link-large">{{ item.related_blog_page }}</a>
		{% if not forloop.last %}, {% endif %}
		{% endfor %}
	</div>
</div>
{% endif %}

{% endblock %}
