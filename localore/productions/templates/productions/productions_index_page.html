{% extends "base.html" %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block body_class %}template-productions-index{% endblock %}

{% block content %}

<div id="title" class="title title-about">
	<div>
		<h1>{{ page.title }}</h1>
		<h3>{{ page.subtitle }}</h3>
		<ul class="title-section-about list-inline">
			<li>
				<a href="{% pageurl page %}?t={{ DISPLAY_TYPE_GRID }}" class="prod-icon prod-icon-grid {% if not use_list_view %}active{% endif %}">
					<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 511.6 511.6"><style>.a{fill:#FFF;}</style><path d="M301.5 347.2h-91.4c-7.6 0-14.1 2.7-19.4 8 -5.3 5.3-8 11.8-8 19.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4S309.1 347.2 301.5 347.2z" class="a"/><path d="M118.8 347.2H27.4c-7.6 0-14.1 2.7-19.4 8C2.7 360.5 0 367 0 374.6v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4S126.4 347.2 118.8 347.2z" class="a"/><path d="M118.8 54.8H27.4c-7.6 0-14.1 2.7-19.4 8C2.7 68.1 0 74.6 0 82.2v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8s8-11.8 8-19.4V82.2c0-7.6-2.7-14.1-8-19.4C132.9 57.5 126.4 54.8 118.8 54.8z" class="a"/><path d="M301.5 201h-91.4c-7.6 0-14.1 2.7-19.4 8s-8 11.8-8 19.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4S309.1 201 301.5 201z" class="a"/><path d="M118.8 201H27.4c-7.6 0-14.1 2.7-19.4 8C2.7 214.3 0 220.8 0 228.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4S126.4 201 118.8 201z" class="a"/><path d="M503.6 62.8c-5.3-5.3-11.8-8-19.4-8h-91.4c-7.6 0-14.1 2.7-19.4 8 -5.3 5.3-8 11.8-8 19.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8s8-11.8 8-19.4V82.2C511.6 74.6 509 68.1 503.6 62.8z" class="a"/><path d="M301.5 54.8h-91.4c-7.6 0-14.1 2.7-19.4 8s-8 11.8-8 19.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4V82.2c0-7.6-2.7-14.1-8-19.4C315.6 57.5 309.1 54.8 301.5 54.8z" class="a"/><path d="M484.2 201h-91.4c-7.6 0-14.1 2.7-19.4 8 -5.3 5.3-8 11.8-8 19.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4C498.3 203.7 491.8 201 484.2 201z" class="a"/><path d="M484.2 347.2h-91.4c-7.6 0-14.1 2.7-19.4 8 -5.3 5.3-8 11.8-8 19.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4S491.8 347.2 484.2 347.2z" class="a"/></svg>
				</a>
			</li>
			<li>
				<a href="{% pageurl page %}?t={{ DISPLAY_TYPE_LIST }}" class="prod-icon prod-icon-list {% if use_list_view %}active{% endif %}">
					<svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 511.6 511.6"><style>.a{fill:#FFF;}</style><path d="M118.8 201H27.4c-7.6 0-14.1 2.7-19.4 8C2.7 214.3 0 220.8 0 228.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4S126.4 201 118.8 201z" class="a"/><path d="M118.8 54.8H27.4c-7.6 0-14.1 2.7-19.4 8C2.7 68.1 0 74.6 0 82.2v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8s8-11.8 8-19.4V82.2c0-7.6-2.7-14.1-8-19.4C132.9 57.5 126.4 54.8 118.8 54.8z" class="a"/><path d="M118.8 347.2H27.4c-7.6 0-14.1 2.7-19.4 8C2.7 360.5 0 367 0 374.6v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h91.4c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4S126.4 347.2 118.8 347.2z" class="a"/><path d="M484.2 201H210.1c-7.6 0-14.1 2.7-19.4 8s-8 11.8-8 19.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h274.1c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4C498.3 203.7 491.8 201 484.2 201z" class="a"/><path d="M484.2 347.2H210.1c-7.6 0-14.1 2.7-19.4 8 -5.3 5.3-8 11.8-8 19.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h274.1c7.6 0 14.1-2.7 19.4-8 5.3-5.3 8-11.8 8-19.4v-54.8c0-7.6-2.7-14.1-8-19.4C498.3 349.8 491.8 347.2 484.2 347.2z" class="a"/><path d="M503.6 62.8c-5.3-5.3-11.8-8-19.4-8H210.1c-7.6 0-14.1 2.7-19.4 8s-8 11.8-8 19.4v54.8c0 7.6 2.7 14.1 8 19.4 5.3 5.3 11.8 8 19.4 8h274.1c7.6 0 14.1-2.7 19.4-8s8-11.8 8-19.4V82.2C511.6 74.6 509 68.1 503.6 62.8z" class="a"/></svg>
				</a>
			</li>
		</ul>
	</div>
</div>

<div class="description">{{ page.intro|richtext }}</div>

{% if use_list_view %}

<div class="container">

	<div class="prod-list">

		{% for prod in page.productions %}
			<div class="row">
				<h6 class="prod-list-loc">{{ prod.city }}, {{ prod.state }}</h6>
				<h6 class="prod-list-call-sign">{{ prod.host_station_call_sign }}</h6>
				<a class="prod-list-title" href="{% pageurl prod %}"><h5>{{ prod.title }}</h5></a>
			</div>
		{% empty %}
			<h3>No productions.</h3>
		{% endfor %}

	</div>

</div>

{% else %}
	{# GRID VIEW #}

<div class="container-full">

	<div class="prod-grid">

		{% for prod in page.productions %}

			{% if forloop.counter0|divisibleby:3 %}<div class="prod-grid-row">{% endif %}

			{% image prod.tile_image|default:prod.hero_image max-800x800 as tile_image %}
			<div class="prod-grid-item post-item">
				<div class="post-item-bg" style="background-image:url({{ tile_image.url }})"></div>
				<a class="post-item-link" href="{% pageurl prod %}">
					<div class="post-item-content">
						<span class="post-item-title">{{ prod.title }}</span>
						<ul class="list-inline post-item-list">
							<li><span class="post-item-date">{{ prod.host_station_call_sign }}</span></li>
							<li><span class="post-item-loc">{{ prod.city }}, {{ prod.state }}</span></li>
						</ul>
					</div>
				</a>
			</div>

			{% if forloop.counter|divisibleby:3 %}</div>{% endif %}

		{% empty %}

			<h3>No productions.</h3>

		{% endfor %}

	</div>

{% endif %}

</div>

{% endblock %}
